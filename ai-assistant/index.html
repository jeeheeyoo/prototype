<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant | HR DocuProcess</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo-area">
                <div class="logo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                </div>
                <!-- Link back to home -->
                <a href="/" style="text-decoration:none;">
                    <span class="logo-text">DocuProcess</span>
                </a>
            </div>

            <ul class="nav-links">
                <li><a href="/"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>Dashboard</a></li>
                <li><a href="/"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="12" y1="18" x2="12" y2="12"></line>
                            <line x1="9" y1="15" x2="15" y2="15"></line>
                        </svg>New Request</a></li>
                <li><a href="#"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>Employees</a></li>
                <li class="active"><a href="/ai-assistant"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>AI Assistant</a></li>
            </ul>

            <div class="user-profile">
                <div class="avatar">JS</div>
                <div class="user-info">
                    <span class="name">Jane Smith</span>
                    <span class="role">HR Specialist</span>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- VIEW 1: Mode Selection -->
            <div id="view-mode-selection"
                style="display:none; flex-direction:column; align-items:center; justify-content:center; height:100%; max-width:600px; margin:0 auto; text-align:center;">
                <h1 style="margin-bottom:1rem;">Configure AI Assistant</h1>
                <p class="subtitle">Choose how you want to collaborate with the AI for approval workflows.</p>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:1.5rem; width:100%; margin-bottom:2rem;">
                    <div class="selection-card" id="card-agent_driven" onclick="selectMode('agent_driven')">
                        <div style="font-size:2rem; margin-bottom:1rem;">ü§ñ</div>
                        <h3>Agent Driven</h3>
                        <p style="font-size:0.85rem; color:var(--color-text-secondary); margin-top:0.5rem;">AI
                            proactively processes tasks and asks for approval only when confidence is low.</p>
                    </div>
                    <div class="selection-card" id="card-review_driven" onclick="selectMode('review_driven')">
                        <div style="font-size:2rem; margin-bottom:1rem;">üëÅÔ∏è</div>
                        <h3>Review Driven</h3>
                        <p style="font-size:0.85rem; color:var(--color-text-secondary); margin-top:0.5rem;">You review
                            every single action proposed by the AI before execution.</p>
                    </div>
                </div>

                <button id="btn-mode-next" class="btn-primary" style="width:100%;" disabled
                    onclick="confirmMode()">Next</button>
            </div>

            <!-- VIEW 2: Dashboard -->
            <div id="view-dashboard" style="display:none; width:100%;">

                <!-- Dashboard Header with Progress -->
                <div class="card" style="margin-bottom:2rem; padding:1.5rem; text-align:left;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:1rem;">
                        <h2 style="font-size:1.1rem; margin:0;">Tasks</h2>
                        <div style="display:flex; gap:0.5rem;">
                            <button class="badge" style="border:none; background:var(--color-bg);">Monthly</button>
                            <button class="badge" style="border:none; cursor:pointer;">Branch</button>
                            <button class="badge" style="border:none; cursor:pointer;">Yearly</button>
                        </div>
                    </div>

                    <div
                        style="height:12px; background:var(--color-bg); border-radius:6px; overflow:hidden; display:flex;">
                        <div id="prog-ai" class="progress-bar-segment"
                            style="width:0%; background:var(--color-primary);"></div>
                        <div id="prog-user" class="progress-bar-segment"
                            style="width:0%; background:var(--color-success);"></div>
                    </div>
                    <div
                        style="display:flex; gap:1.5rem; margin-top:0.75rem; font-size:0.8rem; color:var(--color-text-secondary);">
                        <div style="display:flex; align-items:center; gap:0.5rem;"><span
                                style="width:8px; height:8px; background:var(--color-primary); border-radius:50%;"></span>
                            AI Processed (65%)</div>
                        <div style="display:flex; align-items:center; gap:0.5rem;"><span
                                style="width:8px; height:8px; background:var(--color-success); border-radius:50%;"></span>
                            User Verified (20%)</div>
                    </div>
                </div>

                <!-- Approval List -->
                <div class="card" style="text-align:left; padding:0; overflow:hidden;">
                    <div
                        style="padding:1.5rem; border-bottom:1px solid var(--color-border); display:flex; justify-content:space-between; align-items:center;">
                        <h2 id="header-approvals" style="font-size:1.1rem; margin:0;">Approve</h2>
                        <a href="#" target="_blank"
                            style="font-size:0.85rem; color:var(--color-primary); text-decoration:none;">Open Task List
                            ‚Üó</a>
                    </div>
                    <div id="approval-list" style="padding:1.5rem;">
                        <!-- Injected by logic.js -->
                    </div>
                </div>

                <!-- Chat Trigger Input -->
                <div style="position:fixed; bottom:2rem; left:280px; right:2rem; z-index:100; padding:0 1rem;">
                    <input type="text" id="dashboard-chat-trigger" class="form-input"
                        placeholder="Ask AI Assistant anything to open chat..."
                        style="border-radius:2rem; padding-left:1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); background:white;">
                </div>
            </div>
        </main>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="modal-title" style="margin-bottom:1rem;">Review Item</h2>
            <div
                style="background:var(--color-bg); padding:1rem; border-radius:var(--radius-md); margin-bottom:1.5rem; font-family:monospace; font-size:0.9rem;">
                <p id="modal-desc">...</p>
                <div style="margin-top:1rem; color:var(--color-success);">+ Added 2 clauses</div>
                <div style="color:var(--color-error);">- Removed old terms</div>
            </div>

            <div style="display:flex; justify-content:flex-end; gap:1rem;">
                <button class="btn-secondary" onclick="handleReject()">Reject (Reprocess)</button>
                <button class="btn-primary" onclick="handleApprove()">Approve</button>
            </div>
            <button style="position:absolute; top:1rem; right:1rem; border:none; background:none; cursor:pointer;"
                onclick="closeReviewModal()">‚úï</button>
        </div>
    </div>

    <!-- Side Panel Chat -->
    <div id="chat-panel" class="side-panel">
        <div
            style="padding:1.5rem; border-bottom:1px solid var(--color-border); display:flex; justify-content:space-between; align-items:center;">
            <h3 style="font-size:1.1rem; font-weight:600;">AI Chat</h3>
            <button onclick="toggleChat()" style="border:none; background:none; cursor:pointer;">‚úï</button>
        </div>
        <div style="flex:1; background:var(--color-bg); padding:1.5rem;">
            <div class="message agent"
                style="background:white; padding:1rem; border-radius:8px; border:1px solid var(--color-border); margin-bottom:1rem;">
                Hi. I'm ready to assist with your tasks. Context is loaded from your dashboard selection.
            </div>
        </div>
        <div style="padding:1rem; border-top:1px solid var(--color-border);">
            <div style="display:flex; gap:0.5rem;">
                <input type="text" id="panel-chat-input" class="form-input" placeholder="Type message...">
                <button class="btn-primary" style="padding:0 1rem;">‚Üí</button>
            </div>
        </div>
    </div>

    <script src="/logic.js"></script>
</body>

</html>